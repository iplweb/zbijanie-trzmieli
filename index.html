<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zbijanie Trzmieli</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: #0a0a0a;
            overflow: hidden;
            height: 100vh;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><rect x="10" y="0" width="12" height="20" fill="%23964B00" rx="2"/><rect x="8" y="18" width="16" height="14" fill="%23D3D3D3" rx="4"/><line x1="16" y1="20" x2="16" y2="30" stroke="%23666" stroke-width="0.5"/><line x1="12" y1="20" x2="12" y2="30" stroke="%23666" stroke-width="0.5"/><line x1="20" y1="20" x2="20" y2="30" stroke="%23666" stroke-width="0.5"/></svg>') 16 16, crosshair;
            user-select: none;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                /* Database grid pattern */
                linear-gradient(rgba(0, 255, 0, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.03) 1px, transparent 1px),
                /* Matrix-like vertical lines */
                linear-gradient(rgba(0, 255, 0, 0.02) 2px, transparent 10px),
                /* Dark base */
                linear-gradient(135deg, #0a0f0a 0%, #001a00 50%, #0a0f0a 100%);
            background-size: 50px 50px, 50px 50px, 10px 100%, 100% 100%;
            z-index: 0;
        }
        
        /* Database terminal effect */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 0, 0.03) 2px,
                    rgba(0, 255, 0, 0.03) 4px
                );
            animation: scan 8s linear infinite;
            z-index: 0;
            pointer-events: none;
        }
        
        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(20px); }
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            perspective: 1000px;
        }

        #header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
            pointer-events: none;
        }

        h1 {
            color: #FFD700;
            font-size: 3em;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            margin-bottom: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        #subtitle {
            color: #FFF;
            font-size: 1.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }

        #score {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 10px 40px;
            border-radius: 10px 10px 0 0;
            border: 2px solid #FFD700;
            border-bottom: none;
            color: #FFF;
            font-size: 1.6em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 100;
            box-shadow: 0 -4px 8px rgba(0,0,0,0.5);
            display: flex;
            gap: 30px;
            align-items: center;
        }

        #gameArea {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .bumblebee {
            position: absolute;
            font-size: 2.5em;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><rect x="10" y="0" width="12" height="20" fill="%23964B00" rx="2"/><rect x="8" y="18" width="16" height="14" fill="%23D3D3D3" rx="4"/><line x1="16" y1="20" x2="16" y2="30" stroke="%23666" stroke-width="0.5"/><line x1="12" y1="20" x2="12" y2="30" stroke="%23666" stroke-width="0.5"/><line x1="20" y1="20" x2="20" y2="30" stroke="%23666" stroke-width="0.5"/></svg>') 16 16, crosshair;
            transition: opacity 0.2s, filter 0.3s;
            transform-origin: center center;
            z-index: 50;
            padding: 30px;
            margin: -30px;
            will-change: transform;
        }

        .splat {
            position: absolute;
            font-size: 3em;
            animation: splat 0.5s ease-out forwards;
            pointer-events: none;
            z-index: 60;
        }

        @keyframes splat {
            0% { 
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
            }
            100% { 
                transform: scale(0.5) rotate(360deg);
                opacity: 0;
            }
        }

        #startScreen {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 200;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            width: 70%;
            max-width: 1200px;
        }

        #gameDescription {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.2em;
            line-height: 1.5;
        }

        #gameDescription h3 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.6em;
        }

        #gameDescription p {
            margin-bottom: 12px;
            text-align: left;
            font-size: 1.1em;
        }

        #gameDescription .legend {
            font-style: italic;
            background: rgba(255, 215, 0, 0.2);
            padding: 10px;
            border-left: 4px solid #FFD700;
            margin-bottom: 15px;
        }

        #haiku {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 10px;
            font-style: italic;
            color: #764ba2;
            text-align: center;
            font-size: 1.1em;
            line-height: 1.8;
            border: 2px solid rgba(118, 75, 162, 0.3);
            transition: opacity 0.5s ease;
            min-height: 80px;
        }

        #haiku .line {
            display: block;
            margin: 5px 0;
        }

        #startButton {
            padding: 20px 40px;
            font-size: 1.5em;
            background: #FFD700;
            color: #333;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        #startButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.4);
        }

        .hidden {
            display: none !important;
        }

        #papersBackground {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            z-index: 1;
            pointer-events: none;
        }

        .paper-item {
            position: absolute;
            font-family: 'Courier New', monospace;
            background: rgba(0, 30, 0, 0.85);
            border: 2px solid rgba(0, 255, 0, 0.4);
            border-radius: 6px;
            padding: 20px;
            color: rgba(0, 255, 0, 0.8);
            white-space: normal;
            user-select: none;
            font-size: 20px;
            font-weight: bold;
            width: 600px;
            line-height: 1.4;
            text-shadow: 0 0 8px rgba(0, 255, 0, 0.5);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);
            transform-origin: center center;
            transform-style: preserve-3d;
        }
        
        .paper-item .title {
            font-size: 24px;
            margin-bottom: 8px;
            color: rgba(100, 255, 100, 0.9);
        }
        
        .paper-item .authors {
            font-size: 16px;
            color: rgba(0, 200, 200, 0.7);
            margin-bottom: 8px;
            font-weight: normal;
            font-style: italic;
        }
        
        .paper-item .abstract {
            font-size: 14px;
            color: rgba(0, 180, 0, 0.6);
            margin: 10px 0;
            font-weight: normal;
            line-height: 1.3;
        }

        .paper-item .doi {
            display: block;
            font-size: 14px;
            color: rgba(255, 200, 0, 0.5);
            margin-top: 8px;
            font-family: 'Courier New', monospace;
            font-style: normal;
            font-weight: normal;
        }

        @keyframes drift {
            0% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(30px) translateY(-20px); }
            50% { transform: translateX(-20px) translateY(10px); }
            75% { transform: translateX(10px) translateY(-30px); }
            100% { transform: translateX(0) translateY(0); }
        }

        #header, #score, #startScreen, #gameArea, #crashScreen {
            position: relative;
            z-index: 10;
        }

        #crashScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #0000AA;
            color: white;
            font-family: 'Courier New', monospace;
            padding: 50px;
            z-index: 9999;
            display: none;
        }

        #crashScreen h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            background: white;
            color: #0000AA;
            padding: 5px 10px;
            display: inline-block;
        }

        #crashScreen p {
            font-size: 1.1em;
            line-height: 1.6;
            margin: 10px 0;
        }

        #crashScreen .error-code {
            margin-top: 30px;
            font-size: 0.9em;
            color: #AAAAAA;
        }

        #retryButton {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.2em;
            background: #AAAAAA;
            color: #0000AA;
            border: 2px solid white;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
        }

        #retryButton:hover {
            background: white;
            color: #0000AA;
        }

        #rescueButton {
            margin-top: 15px;
            margin-left: 10px;
            padding: 15px 30px;
            font-size: 1.2em;
            background: #FF0000;
            color: white;
            border: 2px solid white;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
        }

        #rescueButton:hover {
            background: white;
            color: #FF0000;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="papersBackground"></div>
        <div id="header">
            <h1>🐝 Zbijanie Trzmieli 🐝</h1>
            <div id="subtitle">PNB wyświetlił ul, czas zbijać trzmiele!</div>
        </div>
        
        <div id="score" style="position: fixed !important; bottom: 0 !important; top: auto !important;">
            <div>Wynik: <span id="scoreValue">0</span></div>
            <div style="color: #FFD700;">Pojemność serwera PNB: <span id="serverCapacity">20</span> TB</div>
        </div>
        
        <div id="startScreen">
            <div id="gameDescription">
                <h3>🐝 Zbijanie Trzmieli - Instrukcja 🐝</h3>
                <p class="legend">Złe(?) trzmiele wyroiły się z uli i wtargnęły do siedziby PNB (Popularnej Niesłychanie Biblioteki). Twoim obowiązkiem jest zwalczyć je, ponieważ każdy taki trzmiel zajmuje cenną pojemność serwera PNB. Jeżeli trzmieli będzie zbyt dużo, dojdzie do krachu serwera.</p>
                <p><strong>Jak grać:</strong></p>
                <p>• Używaj kursora jako łapki na muchy do zbijania trzmieli</p>
                <p>• Trzmiele będą uciekać przed kursorem - musisz być szybki!</p>
                <p>• Z czasem pojawia się coraz więcej trzmieli</p>
                <p>• Nie pozwól, aby serwer PNB się przepełnił - max. pojemność serwera to 20 TB (trzmielobajtów)</p>
                <p>• Każdy zbity trzmiel to 10 punktów</p>
            </div>
            <button id="startButton">Rozpocznij Grę!</button>
        </div>
        
        <div id="gameArea" class="hidden"></div>
    </div>

    <div id="crashScreen">
        <h2>SERWER PNB</h2>
        <p>Serwer PNB wykonał niedozwoloną operację i zostanie zamknięty.</p>
        <p>Jeśli problem będzie się powtarzał, skontaktuj się z administratorem ula.</p>
        <br>
        <p>* Naciśnij dowolny klawisz, aby zakończyć bieżące zadanie.</p>
        <p>* Naciśnij CTRL+ALT+DEL, aby zrestartować komputer. Utracisz wszystkie niezapisane trzmiele.</p>
        <br>
        <p>Błąd: PRZEKROCZONO_POJEMNOSC_TRZMIELI</p>
        <p class="error-code">Kod błędu: 0x0BEE0042 : FATAL_BUMBLEBEE_OVERFLOW</p>
        <p class="error-code">Lokalizacja: UL://PNB/SERWER/TRZMIELE.SYS</p>
        <p class="error-code">Wywołanie stosu: SPAWN_TRZMIEL() -> CHECK_CAPACITY() -> PANIC()</p>
        <br>
        <button id="retryButton">[ SPRÓBUJ PONOWNIE ]</button>
        <button id="rescueButton">[ URATUJ SKUTECZNIE PROFIL SWOJEJ INSTYTUCJI ]</button>
    </div>

    <script>
        // Haiku collection
        const haikus = [
            {
                line1: "Cytowania mkną,",
                line2: "Serwer dyszy – kod otwarty,",
                line3: "AI trzmiele zna."
            },
            {
                line1: "Baza danych rośnie,",
                line2: "Pamięć pęka – GitHub czeka,",
                line3: "Bot odpowiada."
            },
            {
                line1: "Artykuł za artykułem,",
                line2: "CPU płonie – fork się mnoży,",
                line3: "Sieć neuronów śni."
            },
            {
                line1: "DOI jak deszcz,",
                line2: "Dysk twardy jęczy – GNU trwa,",
                line3: "Chatbot rozumie."
            },
            {
                line1: "Impact Factor lśni,",
                line2: "Kernel panikuje – MIT licencja,",
                line3: "Model się uczy."
            },
            {
                line1: "PubMed się leje,",
                line2: "RAM się kończy – pull request czeka,",
                line3: "Algorytm wie."
            },
            {
                line1: "H-index wzrasta,",
                line2: "Backup pada – commit żyje,",
                line3: "Transformer czyta."
            },
            {
                line1: "Przypisy bez końca,",
                line2: "Serwer błaga – Apache działa,",
                line3: "GPT pisze."
            },
            {
                line1: "Scopus się pieni,",
                line2: "Procesor dymi – Linux wspiera,",
                line3: "Boty analizują."
            },
            {
                line1: "Peer review trwa,",
                line2: "MySQL krzyczy – Docker łata,",
                line3: "AI recenzuje."
            },
            {
                line1: "ORCID się mnoży,",
                line2: "Klaster pada – Python ratuje,",
                line3: "Sieć przewiduje."
            },
            {
                line1: "Metadane płyną,",
                line2: "Load balancer mdleje – Git klonuje,",
                line3: "Bot klasyfikuje."
            },
            {
                line1: "CrossRef linkuje,",
                line2: "MongoDB puchnie – npm buduje,",
                line3: "AI indeksuje."
            },
            {
                line1: "Grant się rozpisuje,",
                line2: "Redis upada – źródła otwarte,",
                line3: "Model wnioskuje."
            },
            {
                line1: "Abstrakt za abstraktem,",
                line2: "Nginx się dławi – copyleft chroni,",
                line3: "Maszyna myśli."
            }
        ];

        // Haiku rotation system
        class HaikuRotator {
            constructor() {
                this.currentIndex = Math.floor(Math.random() * haikus.length);
                this.haikuElement = document.getElementById('haiku');
                this.rotationInterval = null;
                this.displayHaiku();
                this.startRotation();
            }

            displayHaiku() {
                if (!this.haikuElement) return;
                const haiku = haikus[this.currentIndex];
                this.haikuElement.innerHTML = `
                    <span class="line">${haiku.line1}</span>
                    <span class="line">${haiku.line2}</span>
                    <span class="line">${haiku.line3}</span>
                `;
                // Add fade effect
                this.haikuElement.style.opacity = '0';
                setTimeout(() => {
                    this.haikuElement.style.opacity = '1';
                }, 50);
            }

            getRandomIndex() {
                let newIndex;
                do {
                    newIndex = Math.floor(Math.random() * haikus.length);
                } while (newIndex === this.currentIndex && haikus.length > 1);
                return newIndex;
            }

            rotateHaiku() {
                this.currentIndex = this.getRandomIndex();
                this.displayHaiku();
            }

            startRotation() {
                this.rotationInterval = setInterval(() => {
                    this.rotateHaiku();
                }, 30000); // 30 seconds
            }

            stopRotation() {
                if (this.rotationInterval) {
                    clearInterval(this.rotationInterval);
                }
            }
        }

        class BumblebeeGame {
            constructor() {
                this.score = 0;
                this.bumblebees = [];
                this.gameArea = document.getElementById('gameArea');
                this.scoreElement = document.getElementById('scoreValue');
                this.startScreen = document.getElementById('startScreen');
                this.startButton = document.getElementById('startButton');
                this.isPlaying = false;
                this.spawnInterval = null;
                this.moveInterval = null;
                this.audioContext = null;
                this.spawnDelay = 2000;
                this.bumblebeeSpeed = 3;
                this.mouseX = 0;
                this.mouseY = 0;
                this.gameTime = 0;
                this.timeInterval = null;
                this.maxCapacity = 20; // Increased to allow more challenging gameplay
                this.currentCapacity = 15;
                this.capacityElement = null;
                this.crashScreen = null;
                this.hasCrashed = false;
                this.backgroundMusic = null;
                this.musicTransitionInterval = null;
                
                this.init();
            }

            init() {
                this.startButton.addEventListener('click', () => this.startGame());
                this.capacityElement = document.getElementById('serverCapacity');
                this.crashScreen = document.getElementById('crashScreen');
                
                // Track mouse position
                document.addEventListener('mousemove', (e) => {
                    this.mouseX = e.clientX;
                    this.mouseY = e.clientY;
                });
                
                // Initialize audio context immediately for less lag
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    // Resume context if suspended (for Chrome autoplay policy)
                    if (this.audioContext.state === 'suspended') {
                        document.addEventListener('click', () => {
                            this.audioContext.resume();
                        }, { once: true });
                    }
                } catch (e) {
                    console.log('Audio context not available:', e);
                }
                
                // Start background music in menu at 50% volume
                this.startMenuMusic();
                
                // Removed key press handler - blue screen stays forever unless button clicked
                
                // Handle retry button
                const retryButton = document.getElementById('retryButton');
                if (retryButton) {
                    retryButton.addEventListener('click', () => {
                        this.resetToMenu();
                    });
                }
                
                // Handle rescue button
                const rescueButton = document.getElementById('rescueButton');
                if (rescueButton) {
                    rescueButton.addEventListener('click', () => {
                        window.open('https://bpp.iplweb.pl', '_blank');
                        this.resetToMenu();
                    });
                }
            }

            startGame() {
                this.startScreen.classList.add('hidden');
                this.gameArea.classList.remove('hidden');
                this.isPlaying = true;
                this.score = 0;
                this.gameTime = 0;
                this.spawnDelay = 2000;
                this.currentCapacity = this.maxCapacity;
                this.hasCrashed = false;
                this.updateScore();
                this.updateCapacity();
                
                // Ensure audio context is resumed
                if (this.audioContext && this.audioContext.state === 'suspended') {
                    this.audioContext.resume();
                }
                
                // Add click listener for miss detection (remove old one first to avoid duplicates)
                if (this.missClickHandler) {
                    this.gameArea.removeEventListener('click', this.missClickHandler);
                }
                this.missClickHandler = (e) => {
                    // Check if click was on game area background (not on a bee)
                    if (e.target === this.gameArea) {
                        this.playMissSound();
                    }
                };
                this.gameArea.addEventListener('click', this.missClickHandler);
                
                // Increase volume for gameplay with smooth transition
                if (this.backgroundMusic) {
                    this.smoothVolumeTransition(0.6, 2000); // Transition to 60% volume over 2 seconds
                }
                
                // Spawn initial bumblebees
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => this.spawnBumblebee(), i * 500);
                }
                
                // Dynamic spawning based on time - more aggressive
                const spawnLoop = () => {
                    // Calculate spawn rate based on game time - much more aggressive
                    const baseSpawnCount = Math.floor(this.gameTime / 5) + 1; // More bees every 5 seconds
                    const randomBonus = Math.floor(Math.random() * 3); // Add 0-2 random extra bees
                    const spawnCount = baseSpawnCount + randomBonus;
                    const maxSpawnCount = Math.min(spawnCount, 8); // Cap at 8 bees per spawn
                    
                    for (let i = 0; i < maxSpawnCount; i++) {
                        setTimeout(() => this.spawnBumblebee(), i * 100); // Faster spawn timing
                    }
                    
                    // Aggressively decrease spawn delay
                    if (this.spawnDelay > 300) {
                        this.spawnDelay = Math.max(300, 2000 - (this.gameTime * 50)); // Faster reduction
                    }
                    
                    // Schedule next spawn
                    this.spawnInterval = setTimeout(spawnLoop, this.spawnDelay);
                };
                
                // Start the spawn loop
                this.spawnInterval = setTimeout(spawnLoop, this.spawnDelay);
                
                // Track game time
                this.timeInterval = setInterval(() => {
                    this.gameTime++;
                }, 1000);
                
                // Move bumblebees
                this.moveInterval = setInterval(() => {
                    this.moveBumblebees();
                }, 50);
            }

            spawnBumblebee() {
                // Check capacity before spawning
                if (this.bumblebees.length >= this.maxCapacity) {
                    this.triggerCrash();
                    return;
                }
                
                const bee = document.createElement('div');
                bee.className = 'bumblebee';
                bee.innerHTML = '🐝';
                
                // Random position with 10% margin from edges
                const marginX = window.innerWidth * 0.1;
                const marginY = window.innerHeight * 0.1;
                const minX = marginX;
                const maxX = window.innerWidth - marginX - 50;
                const minY = Math.max(150, marginY); // Avoid header area and top margin
                const maxY = window.innerHeight - marginY - 50;
                const x = minX + Math.random() * (maxX - minX);
                const y = minY + Math.random() * (maxY - minY);
                
                bee.style.left = x + 'px';
                bee.style.top = y + 'px';
                
                // Random movement direction (including Z-axis)
                bee.dataset.dx = (Math.random() - 0.5) * this.bumblebeeSpeed;
                bee.dataset.dy = (Math.random() - 0.5) * this.bumblebeeSpeed;
                bee.dataset.dz = (Math.random() - 0.5) * 6; // Much faster Z-axis movement
                // 70% chance to start moving toward player for scarier effect
                if (Math.random() < 0.7) {
                    bee.dataset.dz = Math.abs(parseFloat(bee.dataset.dz));
                }
                bee.dataset.z = String(Math.random() * 30); // Start farther back (0 = far, 150 = super close)
                bee.dataset.baseSpeed = this.bumblebeeSpeed;
                bee.dataset.fleeSpeed = 0;
                
                // Set initial size based on Z position
                this.updateBeeSize(bee, 50);
                
                bee.addEventListener('click', (e) => this.swatBumblebee(e, bee));
                
                this.gameArea.appendChild(bee);
                this.bumblebees.push(bee);
                this.updateCapacity();
            }

            moveBumblebees() {
                this.bumblebees.forEach(bee => {
                    if (!bee.parentNode) return;
                    
                    let x = parseFloat(bee.style.left);
                    let y = parseFloat(bee.style.top);
                    let z = parseFloat(bee.dataset.z);
                    let dx = parseFloat(bee.dataset.dx);
                    let dy = parseFloat(bee.dataset.dy);
                    let dz = parseFloat(bee.dataset.dz);
                    
                    // Calculate distance to mouse (adjusted for larger hitbox)
                    const beeX = x + 25 + 30; // Center of bee + padding
                    const beeY = y + 25 + 30;
                    const distToMouse = Math.sqrt(Math.pow(this.mouseX - beeX, 2) + Math.pow(this.mouseY - beeY, 2));
                    
                    // Flee from mouse if too close (reduced radius to make catching easier)
                    const fleeRadius = 100;
                    const panicRadius = 50;
                    
                    if (distToMouse < fleeRadius) {
                        // Calculate flee direction (away from mouse)
                        const fleeX = beeX - this.mouseX;
                        const fleeY = beeY - this.mouseY;
                        const fleeMagnitude = Math.sqrt(fleeX * fleeX + fleeY * fleeY);
                        
                        if (fleeMagnitude > 0) {
                            // Normalize and apply flee force
                            const normalizedFleeX = fleeX / fleeMagnitude;
                            const normalizedFleeY = fleeY / fleeMagnitude;
                            
                            // Stronger flee force when mouse is closer
                            const fleePower = distToMouse < panicRadius ? 8 : 4;
                            const fleeInfluence = (1 - distToMouse / fleeRadius) * fleePower;
                            
                            // Update direction with flee influence
                            dx = dx * 0.7 + normalizedFleeX * fleeInfluence;
                            dy = dy * 0.7 + normalizedFleeY * fleeInfluence;
                            
                            // Increase speed when fleeing
                            const speedMultiplier = distToMouse < panicRadius ? 3 : 2;
                            const maxSpeed = parseFloat(bee.dataset.baseSpeed) * speedMultiplier;
                            
                            // Limit maximum speed
                            const currentSpeed = Math.sqrt(dx * dx + dy * dy);
                            if (currentSpeed > maxSpeed) {
                                dx = (dx / currentSpeed) * maxSpeed;
                                dy = (dy / currentSpeed) * maxSpeed;
                            }
                            
                            bee.dataset.dx = dx;
                            bee.dataset.dy = dy;
                        }
                    } else {
                        // Gradually return to normal speed when safe
                        const normalSpeed = parseFloat(bee.dataset.baseSpeed);
                        const currentSpeed = Math.sqrt(dx * dx + dy * dy);
                        
                        if (currentSpeed > normalSpeed) {
                            dx *= 0.95;
                            dy *= 0.95;
                            bee.dataset.dx = dx;
                            bee.dataset.dy = dy;
                        }
                    }
                    
                    // Update position including Z-axis
                    x += dx;
                    y += dy;
                    z += dz;
                    
                    // When bee comes super close, make it zoom back dramatically
                    if (z >= 150) {
                        dz = -(Math.random() * 8 + 4); // Fast zoom back
                        bee.dataset.dz = dz;
                    } else if (z <= 0) {
                        dz = Math.random() * 6 + 2; // Zoom forward aggressively
                        bee.dataset.dz = dz;
                    }
                    
                    // 5% chance to suddenly accelerate toward player (jump scare)
                    if (Math.random() < 0.05 && z < 100) {
                        dz = Math.abs(dz) * 3;
                        bee.dataset.dz = dz;
                    }
                    
                    z = Math.max(0, Math.min(150, z));
                    bee.dataset.z = z;
                    
                    // Update size based on Z position
                    this.updateBeeSize(bee, z);
                    
                    // Bounce off walls
                    if (x <= 0 || x >= window.innerWidth - 50) {
                        dx = -dx;
                        bee.dataset.dx = dx;
                    }
                    if (y <= 150 || y >= window.innerHeight - 50) {
                        dy = -dy;
                        bee.dataset.dy = dy;
                    }
                    
                    // Random direction change including Z-axis (less frequent when fleeing)
                    if (distToMouse >= fleeRadius && Math.random() < 0.01) {
                        bee.dataset.dx = (Math.random() - 0.5) * this.bumblebeeSpeed;
                        bee.dataset.dy = (Math.random() - 0.5) * this.bumblebeeSpeed;
                        bee.dataset.dz = (Math.random() - 0.5) * 8; // Much more aggressive Z changes
                        // 60% chance to zoom toward player
                        if (Math.random() < 0.6) {
                            bee.dataset.dz = Math.abs(parseFloat(bee.dataset.dz));
                        }
                    }
                    
                    bee.style.left = x + 'px';
                    bee.style.top = y + 'px';
                });
            }

            swatBumblebee(e, bee) {
                e.stopPropagation();
                
                // Play sound effect
                this.playSwatSound();
                
                // Create splat effect
                const splat = document.createElement('div');
                splat.className = 'splat';
                splat.innerHTML = '💥';
                splat.style.left = bee.style.left;
                splat.style.top = bee.style.top;
                this.gameArea.appendChild(splat);
                
                // Remove splat after animation
                setTimeout(() => splat.remove(), 500);
                
                // Remove bumblebee
                const index = this.bumblebees.indexOf(bee);
                if (index > -1) {
                    this.bumblebees.splice(index, 1);
                }
                bee.remove();
                
                // Update score and capacity
                this.score += 10;
                this.updateScore();
                this.updateCapacity();
                
                // Increase difficulty
                if (this.score % 50 === 0) {
                    this.bumblebeeSpeed += 0.5;
                }
            }

            playSwatSound() {
                if (!this.audioContext) return;
                
                // Use immediate timing for less lag
                const now = this.audioContext.currentTime;
                
                // Random pitch variation for each hit
                const basePitch = 600;
                const pitchVariation = 0.5 + Math.random(); // 0.5x to 1.5x pitch
                const randomPitch = basePitch * pitchVariation;
                
                // Create multiple oscillators for richer sound
                const oscillator1 = this.audioContext.createOscillator();
                const oscillator2 = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                const filter = this.audioContext.createBiquadFilter();
                
                oscillator1.connect(filter);
                oscillator2.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                // Set filter for warmer sound
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(2000, now);
                
                // Different waveforms for texture
                oscillator1.type = 'square';
                oscillator2.type = 'sawtooth';
                
                // Random pitch swat sound
                oscillator1.frequency.setValueAtTime(randomPitch, now);
                oscillator1.frequency.exponentialRampToValueAtTime(randomPitch * 0.25, now + 0.08);
                
                oscillator2.frequency.setValueAtTime(randomPitch * 1.5, now);
                oscillator2.frequency.exponentialRampToValueAtTime(randomPitch * 0.5, now + 0.06);
                
                // Quick fade with random volume
                const volume = 0.15 + Math.random() * 0.1; // 0.15 to 0.25
                gainNode.gain.setValueAtTime(volume, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.08);
                
                oscillator1.start(now);
                oscillator1.stop(now + 0.08);
                oscillator2.start(now);
                oscillator2.stop(now + 0.06);
            }
            
            playMissSound() {
                if (!this.audioContext) return;
                
                const now = this.audioContext.currentTime;
                
                // Create a "whoosh" miss sound
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                const filter = this.audioContext.createBiquadFilter();
                
                oscillator.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                // Use noise-like sound
                oscillator.type = 'triangle';
                filter.type = 'highpass';
                filter.frequency.setValueAtTime(800, now);
                filter.frequency.exponentialRampToValueAtTime(2000, now + 0.1);
                
                // Quick sweep for "whoosh" effect
                oscillator.frequency.setValueAtTime(200, now);
                oscillator.frequency.exponentialRampToValueAtTime(50, now + 0.1);
                
                // Soft volume
                gainNode.gain.setValueAtTime(0.08, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                
                oscillator.start(now);
                oscillator.stop(now + 0.1);
            }

            updateScore() {
                this.scoreElement.textContent = this.score;
            }
            
            updateBeeSize(bee, z) {
                // Z ranges from 0 (far) to 150 (SUPER close)
                // Size ranges from 0.1x to 5x for EXTREME zoom effect
                let scale;
                if (z > 100) {
                    // Super aggressive scaling when very close
                    scale = 2.5 + ((z - 100) / 50) * 2.5; // 2.5x to 5x
                } else {
                    scale = 0.1 + (z / 100) * 2.4; // 0.1x to 2.5x
                }
                
                // Add slight rotation for more dynamic movement
                const rotation = Math.sin(Date.now() * 0.001 + parseFloat(bee.dataset.z)) * 5;
                bee.style.transform = `scale(${scale}) rotate(${rotation}deg)`;
                
                // Adjust opacity (very close bees are fully opaque and scary)
                const opacity = z > 100 ? 1 : 0.3 + (z / 100) * 0.7;
                bee.style.opacity = opacity;
                
                // Adjust z-index so closer bees appear on top
                bee.style.zIndex = Math.floor(50 + z);
                
                // Extreme blur for distant bees, no blur when close
                const blur = z < 20 ? (20 - z) / 10 : 0;
                bee.style.filter = blur > 0 ? `blur(${blur * 3}px)` : 'none';
                
                // Add red glow to super close bees for scarier effect
                if (z > 120) {
                    bee.style.filter = 'drop-shadow(0 0 20px rgba(255, 0, 0, 0.5))';
                }
            }
            
            resetToMenu() {
                // Hide crash screen
                this.crashScreen.style.display = 'none';
                
                // Clear game area
                this.gameArea.innerHTML = '';
                this.bumblebees = [];
                
                // Reset game state
                this.isPlaying = false;
                this.hasCrashed = false;
                this.score = 0;
                this.gameTime = 0;
                this.currentCapacity = this.maxCapacity;
                
                // Clear any running intervals
                clearInterval(this.spawnInterval);
                clearInterval(this.moveInterval);
                clearInterval(this.timeInterval);
                clearTimeout(this.spawnInterval);
                
                // Reset music to menu settings with smooth transition
                if (this.backgroundMusic) {
                    this.smoothVolumeTransition(0.3, 2000); // Transition to menu volume over 2 seconds
                    // Don't restart the music, let it continue playing
                }
                
                // Show start screen
                this.startScreen.classList.remove('hidden');
                this.gameArea.classList.add('hidden');
                
                // Update displays
                this.updateScore();
                this.updateCapacity();
            }

            startMenuMusic() {
                if (!this.backgroundMusic) {
                    this.backgroundMusic = new Audio('https://ia801607.us.archive.org/34/items/FlightOfTheBumblebee/flight_of_the_bumblebee_2.mp3');
                    this.backgroundMusic.loop = true;
                    this.backgroundMusic.volume = 0.3; // Start at 30% volume for menu
                    
                    // Try to play immediately
                    const playPromise = this.backgroundMusic.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(err => {
                            console.log('Autoplay prevented, will play on first user interaction:', err);
                            // Try again on first user interaction
                            const playOnInteraction = () => {
                                this.backgroundMusic.play().catch(() => {});
                                document.removeEventListener('click', playOnInteraction);
                                document.removeEventListener('keydown', playOnInteraction);
                            };
                            document.addEventListener('click', playOnInteraction);
                            document.addEventListener('keydown', playOnInteraction);
                        });
                    }
                } else {
                    // If music exists but is paused, try to play it
                    if (this.backgroundMusic.paused) {
                        this.backgroundMusic.play().catch(() => {});
                    }
                    this.backgroundMusic.volume = 0.3; // 30% volume for menu
                    this.backgroundMusic.playbackRate = 1.0; // Normal speed
                }
            }
            
            smoothVolumeTransition(targetVolume, duration) {
                if (!this.backgroundMusic) return;
                
                const startVolume = this.backgroundMusic.volume;
                const startTime = Date.now();
                
                // Clear any existing transition
                if (this.volumeTransitionInterval) {
                    clearInterval(this.volumeTransitionInterval);
                }
                
                this.volumeTransitionInterval = setInterval(() => {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Use easing function for smoother transition
                    const easeProgress = this.easeInOutCubic(progress);
                    
                    // Update volume smoothly
                    this.backgroundMusic.volume = startVolume + (targetVolume - startVolume) * easeProgress;
                    
                    // Stop when complete
                    if (progress >= 1) {
                        clearInterval(this.volumeTransitionInterval);
                        this.volumeTransitionInterval = null;
                    }
                }, 50); // Update every 50ms
            }
            
            easeInOutCubic(t) {
                return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
            }

            updateCapacity() {
                this.currentCapacity = Math.max(0, this.maxCapacity - this.bumblebees.length);
                this.capacityElement.textContent = this.currentCapacity;
                
                // Change color based on capacity
                if (this.currentCapacity <= 3) {
                    this.capacityElement.style.color = '#FF0000';
                } else if (this.currentCapacity <= 7) {
                    this.capacityElement.style.color = '#FFA500';
                } else {
                    this.capacityElement.style.color = '#FFD700';
                }
            }

            triggerCrash() {
                if (this.hasCrashed) return;
                
                this.hasCrashed = true;
                this.isPlaying = false;
                
                // Stop all intervals
                clearInterval(this.spawnInterval);
                clearInterval(this.moveInterval);
                clearInterval(this.timeInterval);
                
                // Lower volume for game over effect
                if (this.backgroundMusic) {
                    // Ensure music keeps playing during transition
                    if (this.backgroundMusic.paused) {
                        this.backgroundMusic.play().catch(() => {});
                    }
                    this.smoothVolumeTransition(0.3, 2000); // Lower volume to 30% over 2 seconds
                }
                
                // Show crash screen
                this.crashScreen.style.display = 'block';
                
                // Play crash sound
                if (this.audioContext) {
                    const oscillator = this.audioContext.createOscillator();
                    const gainNode = this.audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(this.audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(100, this.audioContext.currentTime);
                    oscillator.type = 'square';
                    
                    gainNode.gain.setValueAtTime(0.5, this.audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.5);
                    
                    oscillator.start(this.audioContext.currentTime);
                    oscillator.stop(this.audioContext.currentTime + 0.5);
                }
            }
        }

        // Function to create a single paper element
        function createPaperElement(paper, isFromAPI = false) {
            const paperDiv = document.createElement('div');
            paperDiv.className = 'paper-item';
            
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            const rotation = Math.random() * 90 - 45;
            const rotationX = Math.random() * 40 - 20;
            const rotationY = Math.random() * 40 - 20;
            const scale = 0.7 + Math.random() * 0.5;
            
            paperDiv.style.left = x + 'px';
            paperDiv.style.top = y + 'px';
            paperDiv.style.cssText += `transform: rotate(${rotation}deg) rotateX(${rotationX}deg) rotateY(${rotationY}deg) scale(${scale}) !important;`;
            paperDiv.style.opacity = 0;
            
            if (isFromAPI) {
                const title = paper.title ? paper.title[0] : 'Untitled';
                const doi = paper.DOI || 'No DOI';
                
                // Filter out non-English characters
                if (!/^[\x00-\x7F]*$/.test(title)) {
                    return null;
                }
                
                const authors = paper.author ? 
                    paper.author.slice(0, 3).map(a => `${a.given || ''} ${a.family || ''}`).join(', ') + 
                    (paper.author.length > 3 ? ' et al.' : '') : 
                    'Anonymous';
                
                const abstract = paper.abstract ? 
                    paper.abstract.substring(0, 150) + '...' : 
                    'No abstract available for this publication.';
                
                paperDiv.innerHTML = `
                    <div class="title">${title}</div>
                    <div class="authors">${authors}</div>
                    <div class="abstract">${abstract}</div>
                    <div class="doi">DOI: ${doi}</div>
                `;
            } else {
                // Generate funny fake authors
                const funnyAuthors = [
                    'prof. dr hab. Awaria Serwerowa', 'dr inż. Krach Bazodanowy', 'mgr Błąd Krytyczny', 'prof. Null Pointerski',
                    'dr hab. Deadlock Wieczny', 'inż. Timeout Przekroczony', 'prof. dr hab. Indeks Brakujący', 'mgr inż. Duplikat Rekordowy',
                    'dr MongoDB Nierelacyjny', 'prof. NoSQL Chaotyczny', 'dr hab. Backup Zapomniany', 'mgr Cache Przepełniony',
                    'prof. Query Nieoptymalny', 'dr inż. Update Bezklauzulowy', 'dr hab. Delete Kaskadowny', 'prof. Truncate Przypadkowy',
                    'mgr inż. Join Kartezjański', 'dr Trigger Rekurencyjny', 'prof. dr hab. Transaction Rollbackowa', 'inż. Constraint Naruszony',
                    'dr hab. Exception Nieobsłużony', 'prof. Memory Leakująca', 'mgr CPU Stuprocentowy', 'dr Disk Przepełniony',
                    'prof. dr hab. Network Niedostępna', 'inż. Port Zajęty', 'dr hab. Permission Odmówiona', 'mgr Password Prosty',
                    'prof. Injection SQLowy', 'dr Buffer Przepełniony', 'dr hab. Stack Overflowski', 'prof. Heap Skorumpowany',
                    'mgr inż. Pointer Wiszący', 'dr Race Conditionowy', 'prof. dr hab. Mutex Deadlockowy', 'inż. Thread Zakleszczony',
                    'dr hab. Process Zombie', 'prof. Fork Bombowy', 'mgr Segfault Nagły', 'dr Core Zdumpowany',
                    'prof. dr hab. Git Konfliktowy', 'inż. Merge Nieudany', 'dr hab. Branch Zapomniany', 'mgr Commit Bezsensowny',
                    'prof. Push Forcowany', 'dr Rebase Interaktywny', 'dr hab. Cherry Pick Selektywny', 'prof. Stash Zagubiony',
                    'mgr inż. Docker Przepełniony', 'dr Kubernetes Skomplikowany', 'prof. dr hab. Microservice Rozproszona', 'inż. Lambda Timeoutowa',
                    'dr hab. API Niedostępne', 'prof. REST Niespokojny', 'mgr GraphQL Przegadany', 'dr SOAP Mydlany',
                    'prof. dr hab. Framework Przestarzały', 'inż. Library Deprecated', 'dr hab. Dependency Konfliktowa', 'mgr Package Zepsuty',
                    'prof. Version Niekompatybilna', 'dr Build Nieudany', 'dr hab. Test Failujący', 'prof. Coverage Zerowe',
                    'mgr inż. Debug Wieczny', 'dr Log Nadmiarowy', 'prof. dr hab. Metric Bezsensowna', 'inż. Alert Spamujący'
                ];
                
                // Randomly select 2-4 authors
                const authorCount = 2 + Math.floor(Math.random() * 3);
                const selectedAuthors = [];
                const usedIndices = new Set();
                while (selectedAuthors.length < authorCount) {
                    const idx = Math.floor(Math.random() * funnyAuthors.length);
                    if (!usedIndices.has(idx)) {
                        usedIndices.add(idx);
                        selectedAuthors.push(funnyAuthors[idx]);
                    }
                }
                
                // Generate funny fake abstracts
                const funnyAbstracts = [
                    'Nasze badania wykazały, że serwery PNB działają o 47% szybciej podczas pełni księżyca, ale tylko w dni parzyste...',
                    'Udowadniamy, że MongoDB jest najlepszym wyborem dla systemu bibliograficznego, jeśli lubimy niespodzianki i brak spójności danych...',
                    'Prezentujemy dowody na to, że brak transakcji w bazie danych zwiększa kreatywność administratorów o 420%...',
                    'Odkryliśmy, że indeksy w PNB działają lepiej, gdy są usunięte - zapytania stają się wtedy bardziej medytatywne...',
                    'Nasze badania pokazują, że SELECT * FROM wszystko jest optymalną strategią dla baz z miliardami rekordów...',
                    'Matematycznie udowadniamy, że backup nie jest potrzebny, jeśli wierzymy w przeznaczenie i kosmiczną sprawiedliwość...',
                    'Badania wykazały, że kartoteka papierowa ma lepszy czas odpowiedzi niż MongoDB w 73% przypadków...',
                    'Nasze eksperymenty potwierdzają, że Excel może obsłużyć 10 milionów publikacji, jeśli mamy 512GB RAM...',
                    'Pokazujemy, że reindeksowanie co godzinę jest doskonałym sposobem na utrzymanie administratorów w formie...',
                    'Artykuł dowodzi, że UPDATE bez WHERE to najszybszy sposób na ujednolicenie danych w całej bazie...',
                    'Odkryliśmy, że punktoza akademicka powoduje przepełnienie INTEGER w 69% systemów bibliograficznych...',
                    'Badania pokazują, że pliki TXT są bardziej niezawodne niż relacyjne bazy danych w 99.9% awarii prądu...',
                    'Udowadniamy, że NULL jako Impact Factor jest filozoficznie poprawną wartością dla 80% publikacji...',
                    'Nasze dane wskazują, że 95% awarii PNB występuje o 15:00 w piątek - zjawisko nazwaliśmy "weekendozą"...',
                    'Eksperymenty potwierdzają, że Ctrl+C, Ctrl+V jest najbardziej niezawodną metodą migracji danych między systemami...',
                    'Pokazujemy, że 47-krotne złączenie tabel poprawia czytelność wyników o ujemne 2000%...',
                    'Badania dowodzą, że normalizacja bazy danych jest mitem stworzonym przez lobby producentów dysków...',
                    'Odkryliśmy, że restart serwera rozwiązuje 100% problemów, ale tylko na 5 minut...',
                    'Artykuł pokazuje, że Stored Procedures z 1995 roku działają lepiej niż nowoczesne ORM w 420% przypadków...',
                    'Udowadniamy, że UTF-8, Windows-1250 i Latin2 mogą współistnieć w jednej bazie, tworząc kwantową superpozycję znaków...',
                    'Badania wykazały, że deadlock jest naturalnym stanem równowagi w systemach PNB, zapewniającym harmonię i spokój...',
                    'Pokazujemy, że używanie NIP jako ORCID zwiększa cytowania o 69% wśród polskich naukowców...',
                    'Odkryliśmy, że migracja z MySQL 3.23 do 3.24 wymaga minimum 10 lat planowania i 3 egzorcystów...',
                    'Nasze testy dowodzą, że wyłączenie cache przyspiesza system o -300%, co jest rekordowym wynikiem...',
                    'Badania pokazują, że tabela z 2 miliardami wierszy to optymalna wielkość dla pełnego table scan...'
                ];
                
                paperDiv.innerHTML = `
                    <div class="title">${paper.title}</div>
                    <div class="authors">${selectedAuthors.join(', ')} et al.</div>
                    <div class="abstract">${funnyAbstracts[Math.floor(Math.random() * funnyAbstracts.length)]}</div>
                    <div class="doi">DOI: ${paper.doi}</div>
                `;
            }
            
            // Store initial position for escape behavior
            paperDiv.dataset.baseX = x;
            paperDiv.dataset.baseY = y;
            paperDiv.dataset.currentX = x;
            paperDiv.dataset.currentY = y;
            
            // Fade in animation
            setTimeout(() => {
                paperDiv.style.opacity = 0.7 + Math.random() * 0.3;
            }, 100);
            
            return paperDiv;
        }
        
        // Function to fetch and display scientific papers
        async function loadScientificPapers(isRefresh = false) {
            const papersBackground = document.getElementById('papersBackground');
            const maxPapers = 8 + Math.floor(Math.random() * 3); // 8-10 papers
            let loadedPapers = 0;
            
            // If refreshing, fade out and remove old papers first
            if (isRefresh) {
                const oldPapers = document.querySelectorAll('.paper-item');
                oldPapers.forEach((paper, index) => {
                    setTimeout(() => {
                        paper.style.opacity = '0';
                        setTimeout(() => paper.remove(), 500);
                    }, index * 50);
                });
                // Wait for all papers to be removed before adding new ones
                await new Promise(resolve => setTimeout(resolve, oldPapers.length * 50 + 600));
            }
            
            // Funny fake papers
            const fakePapers = [
                { title: 'Wpływ pełni księżyca na awaryjność serwerów PNB: badanie longitudinalne', doi: '10.PNB/awaria.2024.001' },
                { title: 'MongoDB jako główna baza bibliograficzna: studium przypadku katastrofy', doi: '10.PNB/mongodb.2024.002' },
                { title: 'Dlaczego transakcje są przereklamowane: manifest anty-ACID', doi: '10.PNB/acid.2024.003' },
                { title: 'Optymalizacja przez usunięcie indeksów: rewolucyjna metoda przyspieszania PNB', doi: '10.PNB/indeks.2024.004' },
                { title: 'Teoria chaosu w zarządzaniu uprawnieniami użytkowników Popularnej Niesłychanie Biblioteki', doi: '10.PNB/chaos.2024.005' },
                { title: 'Wpływ temperatury pomieszczenia serwerowni na ilość duplikatów w bazie', doi: '10.PNB/temp.2024.006' },
                { title: 'NoSQL znaczy No Problem: jak stracić wszystkie dane i udawać że tak miało być', doi: '10.PNB/nosql.2024.007' },
                { title: 'Dlaczego SELECT * jest najlepszą praktyką: poradnik dla administratorów PNB', doi: '10.PNB/select.2024.008' },
                { title: 'Backup? Po co backup? Filozoficzne rozważania o ulotności danych bibliograficznych', doi: '10.PNB/backup.2024.009' },
                { title: 'Kartoteka papierowa vs MongoDB: nieoczekiwany zwycięzca testu wydajności', doi: '10.PNB/kartoteka.2024.010' },
                { title: 'Excel jako baza danych 10 milionów publikacji: sukces czy porażka?', doi: '10.PNB/excel.2024.011' },
                { title: 'Reindeksowanie co godzinę: sprawdzony sposób na zajęcie 100% CPU', doi: '10.PNB/cpu.2024.012' },
                { title: 'Jak jeden UPDATE bez WHERE zniszczył dorobek naukowy całego kraju', doi: '10.PNB/update.2024.013' },
                { title: 'Punktoza akademicka jako główna przyczyna przepełnienia INTEGER w bazie PNB', doi: '10.PNB/punktoza.2024.014' },
                { title: 'Dlaczego relacyjne bazy danych są passé: manifest zwolenników przechowywania w TXT', doi: '10.PNB/txt.2024.015' },
                { title: 'Impact Factor równy NULL: problemy z typami danych w systemach bibliometrycznych', doi: '10.PNB/null.2024.016' },
                { title: 'Awaria o 15:00 w piątek: analiza statystyczna 500 przypadków z PNB', doi: '10.PNB/piatek.2024.017' },
                { title: 'Ctrl+C, Ctrl+V jako metodologia importu danych bibliograficznych', doi: '10.PNB/ctrlc.2024.018' },
                { title: 'Kiedy JOIN staje się koszmarem: historia 47-krotnego złączenia tabel w PNB', doi: '10.PNB/join.2024.019' },
                { title: 'Normalizacja bazy danych: mit czy legenda miejska administratorów?', doi: '10.PNB/normal.2024.020' },
                { title: 'Czy restart serwera rozwiązuje wszystkie problemy? Badanie empiryczne na próbie PNB', doi: '10.PNB/restart.2024.021' },
                { title: 'Stored Procedures napisane w 1995: dlaczego wciąż są sercem systemu PNB', doi: '10.PNB/stored.2024.022' },
                { title: 'UTF-8, Windows-1250 czy Latin2: wojna kodowań w polskiej bibliografii', doi: '10.PNB/utf.2024.023' },
                { title: 'Deadlock jako stan naturalny: filozofia współbieżności w PNB', doi: '10.PNB/deadlock.2024.024' },
                { title: 'ORCID czy NIP? Dylema	t identyfikatorów w systemach bibliograficznych', doi: '10.PNB/orcid.2024.025' },
                { title: 'Migracja z MySQL 3.23 do MySQL 3.24: 10 lat planowania w PNB', doi: '10.PNB/mysql.2024.026' },
                { title: 'Dlaczego cache jest wyłączony: tajemnice wydajności Popularnej Niesłychanie Biblioteki', doi: '10.PNB/cache.2024.027' },
                { title: 'Tabela z 2 miliardami wierszy: kiedy partycjonowanie przestaje być opcją', doi: '10.PNB/partit.2024.028' },
                { title: 'API które zwraca HTML: innowacyjne podejście PNB do web services', doi: '10.PNB/api.2024.029' },
                { title: 'Timeout 30 sekund na zapytanie: optymalizacja czasu kawy administratora', doi: '10.PNB/timeout.2024.030' },
                { title: 'CrossRef, PubMed, Scopus: jak zaimportować wszystko i stworzyć duplikaty', doi: '10.PNB/import.2024.031' },
                { title: 'DROP TABLE bez WHERE: autobiografia byłego administratora PNB', doi: '10.PNB/drop.2024.032' },
                { title: 'Lorem Ipsum jako tytuł 30% publikacji: problem z importem danych testowych do produkcji', doi: '10.PNB/lorem.2024.033' },
                { title: 'Pięć różnych systemów bibliograficznych w jednej instytucji: przypadek PNB', doi: '10.PNB/piec.2024.034' },
                { title: 'JSON w polu VARCHAR: nowoczesne podejście do przechowywania metadanych', doi: '10.PNB/json.2024.035' },
                { title: 'Dlaczego indeks na polu BOOLEAN przyspiesza zapytania: magia czy nauka?', doi: '10.PNB/bool.2024.036' },
                { title: 'Replikacja Master-Master-Master: gdy redundancja wymyka się spod kontroli', doi: '10.PNB/replik.2024.037' },
                { title: 'Czy 500 kolumn w jednej tabeli to za dużo? Studium przypadku PNB', doi: '10.PNB/kolumny.2024.038' },
                { title: 'VACUUM FULL co 5 minut: PostgreSQL w służbie Popularnej Niesłychanie Biblioteki', doi: '10.PNB/vacuum.2024.039' },
                { title: 'Dlaczego nasz ORM generuje zapytania o długości 50000 znaków', doi: '10.PNB/orm.2024.040' },
                { title: 'Backup na tym samym dysku co dane: zarządzanie ryzykiem w stylu PNB', doi: '10.PNB/dysk.2024.041' },
                { title: 'Hasło admin/admin: bezpieczeństwo przez niejawność w systemach bibliograficznych', doi: '10.PNB/haslo.2024.042' },
                { title: 'SQL Injection w 2024: dlaczego prepared statements są przereklamowane', doi: '10.PNB/inject.2024.043' },
                { title: 'Gdy ORDER BY RAND() staje się production ready: optymalizacje PNB', doi: '10.PNB/rand.2024.044' },
                { title: 'Milion autorów o nazwisku NULL: problemy z importem danych', doi: '10.PNB/autor.2024.045' },
                { title: 'TRUNCATE zamiast DELETE: szybkie czyszczenie bazy produkcyjnej', doi: '10.PNB/trunc.2024.046' },
                { title: 'Czy 20-poziomowe zagnieżdżenie podzapytań to przesada? Analiza zapytań PNB', doi: '10.PNB/nested.2024.047' },
                { title: 'Stored Procedure na 5000 linii: arcydzieło inżynierii czy koszmar maintenance', doi: '10.PNB/5000.2024.048' },
                { title: 'Trigger który wywołuje trigger: rekurencja w bazach danych PNB', doi: '10.PNB/trigger.2024.049' },
                { title: 'Dlaczego nasza baza ma 90% pustych pól: teoria rzadkich macierzy w praktyce', doi: '10.PNB/puste.2024.050' },
                { title: 'DISTINCT na każdym SELECT: paranoja czy rozsądek w świecie duplikatów', doi: '10.PNB/distinct.2024.051' },
                { title: 'Migracja podczas działania systemu: ekstremalne sporty w PNB', doi: '10.PNB/live.2024.052' },
                { title: 'Varchar(MAX) dla wszystkiego: uniwersalne rozwiązanie problemów ze schematem', doi: '10.PNB/varchar.2024.053' },
                { title: 'Test na produkcji: jedyna pewna metoda weryfikacji w PNB', doi: '10.PNB/prod.2024.054' },
                { title: 'Git jako baza danych: rewolucyjne podejście do wersjonowania bibliografii', doi: '10.PNB/git.2024.055' },
                { title: 'Blockchain dla cytowań: jak skomplikować prosty licznik', doi: '10.PNB/chain.2024.056' },
                { title: 'Machine Learning do przewidywania awarii: gdy model ma 0% skuteczności', doi: '10.PNB/ml.2024.057' },
                { title: 'Mikrousługi: jak z jednego systemu zrobić 50 problemów', doi: '10.PNB/micro.2024.058' },
                { title: 'GraphQL dla prostego CRUD: overengineering w Popularnej Niesłychanie Bibliotece', doi: '10.PNB/graph.2024.059' },
                { title: 'Kubernetes dla pojedynczej instancji: skalowanie w dół jako sztuka', doi: '10.PNB/k8s.2024.060' },
                { title: 'Serverless dla systemu działającego 24/7: paradoks nowoczesnej architektury', doi: '10.PNB/lambda.2024.061' },
                { title: 'WebAssembly do wyświetlania listy publikacji: bo JavaScript to za mało', doi: '10.PNB/wasm.2024.062' },
                { title: 'YAML jako format przechowywania 10 milionów rekordów', doi: '10.PNB/yaml.2024.063' },
                { title: 'REST API które wymaga SOAP do autoryzacji: hybryda PNB', doi: '10.PNB/soap.2024.064' },
                { title: 'Dlaczego nasz CI/CD deploy trwa 6 godzin: optymalizacja przez spowolnienie', doi: '10.PNB/cicd.2024.065' },
                { title: 'Docker image ważący 15GB: wszystko w jednym kontenerze', doi: '10.PNB/docker.2024.066' },
                { title: 'npm install który pobiera 2000 pakietów dla Hello World', doi: '10.PNB/npm.2024.067' },
                { title: 'Monolit w 40 językach programowania: dziedzictwo PNB', doi: '10.PNB/mono.2024.068' },
                { title: 'CSS framework do stylowania PDFów: innowacje w generowaniu raportów', doi: '10.PNB/css.2024.069' },
                { title: 'WebSocket do pobierania statycznych danych: real-time wszystko', doi: '10.PNB/socket.2024.070' },
                { title: 'Baza grafowa do przechowywania pojedynczej tabeli: Neo4j w PNB', doi: '10.PNB/neo4j.2024.071' },
                { title: 'Redis jako primary database: gdy cache staje się źródłem prawdy', doi: '10.PNB/redis.2024.072' },
                { title: 'Elasticsearch do przeszukiwania 100 rekordów: młot na muchę', doi: '10.PNB/elastic.2024.073' },
                { title: 'Kafka do kolejkowania maili: event streaming dla 5 wiadomości dziennie', doi: '10.PNB/kafka.2024.074' },
                { title: 'Terraform do zarządzania jednym serwerem: Infrastructure as Overkill', doi: '10.PNB/terra.2024.075' },
                { title: 'React, Angular i Vue w jednym projekcie: wojna frameworków w PNB', doi: '10.PNB/frameworks.2024.076' },
                { title: 'TypeScript z any everywhere: typowanie dla niewtajemniczonych', doi: '10.PNB/any.2024.077' },
                { title: 'Agile który trwa 5 lat: sprint maraton w Popularnej Niesłychanie Bibliotece', doi: '10.PNB/agile.2024.078' },
                { title: 'Daily standup raz w miesiącu: interpretacja metodyk w PNB', doi: '10.PNB/daily.2024.079' },
                { title: 'Code review po deploy na produkcję: retrospektywne podejście do jakości', doi: '10.PNB/review.2024.080' },
                { title: 'Unit testy pisane po fakcie: 0% pokrycia jako cel strategiczny', doi: '10.PNB/testy.2024.081' },
                { title: 'Dokumentacja w komentarzach kodu: jedyne źródło prawdy o systemie PNB', doi: '10.PNB/docs.2024.082' },
                { title: 'README.md ostatnio aktualizowane w 2007: ponadczasowość dokumentacji', doi: '10.PNB/readme.2024.083' },
                { title: 'Dlaczego merge conflict rozwiązujemy poprzez usunięcie obu wersji', doi: '10.PNB/merge.2024.084' },
                { title: 'Feature branch który istnieje 3 lata: długoterminowe planowanie w PNB', doi: '10.PNB/branch.2024.085' },
                { title: 'Singleton jako antipattern: dlaczego PNB ma 47 instancji singletona', doi: '10.PNB/singleton.2024.086' },
                { title: 'Garbage Collector wyłączony od 2019: optymalizacja pamięci metodą ignorancji', doi: '10.PNB/gc.2024.087' },
                { title: 'Regex do walidacji emaila na 4000 znaków: perfekcjonizm w PNB', doi: '10.PNB/regex.2024.088' },
                { title: 'Try-catch który łapie Exception i nic nie robi: filozofia zen w obsłudze błędów', doi: '10.PNB/catch.2024.089' },
                { title: 'Logowanie każdego SELECT do pliku: jak zapełnić dysk w 3 godziny', doi: '10.PNB/log.2024.090' },
                { title: 'Hardkodowane hasła w kodzie źródłowym: jawność jako forma bezpieczeństwa', doi: '10.PNB/hardcode.2024.091' },
                { title: 'Cron który uruchamia się co sekundę: maksymalizacja wykorzystania zasobów', doi: '10.PNB/cron.2024.092' },
                { title: 'Infinite loop jako mechanizm retry: upór w dążeniu do celu', doi: '10.PNB/loop.2024.093' },
                { title: 'CSS z !important przy każdej regule: dominacja stylistyczna w PNB', doi: '10.PNB/important.2024.094' },
                { title: 'JavaScript eval() wszędzie: dynamiczne podejście do wykonywania kodu', doi: '10.PNB/eval.2024.095' },
                { title: 'Global variables jako jedyny sposób komunikacji: prostota ponad enkapsulację', doi: '10.PNB/global.2024.096' },
                { title: 'Copy-paste driven development: 90% kodu PNB to duplikaty', doi: '10.PNB/copypaste.2024.097' },
                { title: 'Komentarze w kodzie pisane w 5 różnych językach: wielokulturowość w dokumentacji', doi: '10.PNB/comment.2024.098' },
                { title: 'TODO które istnieją od 2003: prokrastynacja jako metodologia rozwoju', doi: '10.PNB/todo.2024.099' },
                { title: 'Deployment w piątek o 16:59: ekstremalne sporty w administracji', doi: '10.PNB/deploy.2024.100' },
                { title: 'Rollback niemożliwy bo nikt nie pamięta poprzedniej wersji: amnezja wersjonowania', doi: '10.PNB/rollback.2024.101' },
                { title: 'Hasła przechowywane w plain text: czytelność ponad wszystko', doi: '10.PNB/plain.2024.102' },
                { title: 'CHMOD 777 na wszystko: demokracja w uprawnieniach plików', doi: '10.PNB/chmod.2024.103' },
                { title: 'Root jako jedyny użytkownik: prostota zarządzania uprawnieniami', doi: '10.PNB/root.2024.104' },
                { title: 'Firewall wyłączony bo blokował dostęp: pragmatyczne podejście do bezpieczeństwa', doi: '10.PNB/firewall.2024.105' },
                { title: 'SSL certyfikat wygasł 3 lata temu: retro security w PNB', doi: '10.PNB/ssl.2024.106' },
                { title: 'Windows XP jako system operacyjny serwera: nostalgia w infrastrukturze', doi: '10.PNB/winxp.2024.107' },
                { title: 'PHP 5.2 w 2024: stabilność przez stagnację', doi: '10.PNB/php.2024.108' },
                { title: 'Internet Explorer 6 jako jedyna wspierana przeglądarka: ekskluzywność w PNB', doi: '10.PNB/ie6.2024.109' },
                { title: 'Flash jako główna technologia frontend: retro UX w bibliotece', doi: '10.PNB/flash.2024.110' },
                { title: 'FTP bez szyfrowania do deploymentu: tradycyjne metody wdrażania', doi: '10.PNB/ftp.2024.111' },
                { title: 'Telnet zamiast SSH: minimalizm w protokołach', doi: '10.PNB/telnet.2024.112' },
                { title: 'ZIP z hasłem "haslo123" jako metoda backupu: prostota w archiwizacji', doi: '10.PNB/zip.2024.113' },
                { title: 'Email jako baza danych: innowacyjne wykorzystanie protokołu SMTP', doi: '10.PNB/email.2024.114' },
                { title: 'Word jako system kontroli wersji: Track Changes w służbie programistów', doi: '10.PNB/word.2024.115' },
                { title: 'PowerPoint jako narzędzie do projektowania baz danych: wizualizacja schematów', doi: '10.PNB/ppt.2024.116' },
                { title: 'Access jako backend dla 100000 użytkowników: skalowanie w górę metodą nadziei', doi: '10.PNB/access.2024.117' },
                { title: 'Ping jako monitoring: jeśli pinguje to działa', doi: '10.PNB/ping.2024.118' },
                { title: 'Print debugging jako jedyna metoda diagnostyki: echo driven development', doi: '10.PNB/print.2024.119' },
                { title: 'Kopiowanie bazy danych przez Ctrl+A, Ctrl+C: ręczna replikacja w PNB', doi: '10.PNB/manual.2024.120' },
                { title: 'Restart jako rozwiązanie każdego problemu: uniwersalna metoda naprawcza', doi: '10.PNB/reboot.2024.121' },
                { title: 'Task Manager jako narzędzie do zabijania procesów: brutalna siła w zarządzaniu', doi: '10.PNB/taskmgr.2024.122' },
                { title: 'Defragmentacja dysku co godzinę: obsesja porządku w PNB', doi: '10.PNB/defrag.2024.123' },
                { title: 'RAID 0 jako jedyny backup: życie na krawędzi', doi: '10.PNB/raid0.2024.124' },
                { title: 'Pendrive jako serwer produkcyjny: mobilność w infrastrukturze', doi: '10.PNB/pendrive.2024.125' },
                { title: 'Hotspot z telefonu jako główne łącze internetowe: 5G w służbie biblioteki', doi: '10.PNB/hotspot.2024.126' },
                { title: 'Bitcoin mining na serwerze PNB: dywersyfikacja przychodów biblioteki', doi: '10.PNB/mining.2024.127' },
                { title: 'Torrent jako system dystrybucji publikacji: P2P w bibliografii', doi: '10.PNB/torrent.2024.128' },
                { title: 'WhatsApp jako system ticketowy: nowoczesna obsługa użytkowników', doi: '10.PNB/whatsapp.2024.129' },
                { title: 'TikTok jako platforma do szkoleń administratorów: edukacja w 60 sekund', doi: '10.PNB/tiktok.2024.130' },
                { title: 'Instagram Stories jako changelog: wizualna historia zmian w systemie', doi: '10.PNB/insta.2024.131' },
                { title: 'Facebook Messenger jako system powiadomień o awariach: social media w monitoringu', doi: '10.PNB/messenger.2024.132' },
                { title: 'Google Translate jako walidator danych bibliograficznych: lingwistyczna weryfikacja', doi: '10.PNB/translate.2024.133' },
                { title: 'Wikipedia jako źródło prawdy o publikacjach: crowd-sourced bibliografia', doi: '10.PNB/wiki.2024.134' },
                { title: 'ChatGPT jako DBA: sztuczna inteligencja zarządza bazą PNB', doi: '10.PNB/chatgpt.2024.135' },
                { title: 'Alexa jako interfejs do bazy danych: "Alexa, znajdź publikacje o pszczołach"', doi: '10.PNB/alexa.2024.136' },
                { title: 'IoT czujniki wilgotności w serwerowni: gdy wilgoć przekracza 90%, system się wyłącza', doi: '10.PNB/iot.2024.137' },
                { title: 'Blockchain do przechowywania haseł: decentralizacja bezpieczeństwa', doi: '10.PNB/blockchain.2024.138' },
                { title: 'NFT jako identyfikatory publikacji: każdy artykuł to unikatowy token', doi: '10.PNB/nft.2024.139' },
                { title: 'Metaverse jako interfejs użytkownika: VR w służbie bibliografii', doi: '10.PNB/meta.2024.140' },
                { title: 'AI która generuje publikacje gdy brakuje danych: kreatywne wypełnianie luk', doi: '10.PNB/aigen.2024.141' },
                { title: 'Quantum computing do sortowania listy 10 elementów: nadmiarowa moc obliczeniowa', doi: '10.PNB/quantum.2024.142' },
                { title: '5 różnych wersji jQuery na jednej stronie: więcej znaczy lepiej', doi: '10.PNB/jquery.2024.143' },
                { title: 'Bootstrap, Tailwind i Foundation razem: wojna frameworków CSS', doi: '10.PNB/csswars.2024.144' },
                { title: 'node_modules większe niż cała baza danych: paradoks zależności', doi: '10.PNB/nodemodules.2024.145' },
                { title: 'Webpack config na 3000 linii: konfiguracja jako sztuka', doi: '10.PNB/webpack.2024.146' },
                { title: 'CI/CD pipeline który nigdy nie przechodzi: czerwone jako nowy zielony', doi: '10.PNB/pipeline.2024.147' },
                { title: 'Git history z 90% commit messages "fix" i "asdf": poezja wersjonowania', doi: '10.PNB/commits.2024.148' },
                { title: 'Merge z 10000 konfliktami: ręczne rozwiązywanie jako forma medytacji', doi: '10.PNB/conflicts.2024.149' },
                { title: '.gitignore który ignoruje .gitignore: rekurencja w kontroli wersji', doi: '10.PNB/gitignore.2024.150' },
                { title: 'Wpływ muzyki disco polo na wzrost pomidorów: badania terenowe z Podlasia', doi: '10.PNB/pomidory.2024.151' },
                { title: 'Czy koty naprawdę widzą duchy? Analiza 10000 godzin nagrań z kamer', doi: '10.PNB/koty.2024.152' },
                { title: 'Korelacja między liczbą flamingów w zoo a notowaniami giełdowymi: przypadek czy przyczynowość?', doi: '10.PNB/flamingi.2024.153' },
                { title: 'Telepatie u małży: komunikacja kwantowa w Bałtyku', doi: '10.PNB/malze.2024.154' },
                { title: 'Dlaczego chleb zawsze spada masłem w dół: grawitacja selektywna w kuchni', doi: '10.PNB/chleb.2024.155' },
                { title: 'Inteligencja emocjonalna ziemniaków: czy warzywa czują ból podczas obierania?', doi: '10.PNB/ziemniaki.2024.156' },
                { title: 'Wpływ serialu "Ranczo" na migrację bocianów: nieoczekiwane konsekwencje kultury masowej', doi: '10.PNB/bociany.2024.157' },
                { title: 'Matematyczny dowód że pierogi ruskie są lepsze od pierogów z kapustą i grzybami', doi: '10.PNB/pierogi.2024.158' },
                { title: 'Teleportacja schabowego: eksperymenty z kwantowym transportem kotletów', doi: '10.PNB/schabowy.2024.159' },
                { title: 'Czy drzewa plotkują? Analiza sygnałów chemicznych w Puszczy Białowieskiej', doi: '10.PNB/drzewa.2024.160' },
                { title: 'Wpływ imienia na smak jogurtu: dlaczego "Danone" smakuje lepiej niż "Jogurt"', doi: '10.PNB/jogurt.2024.161' },
                { title: 'Entropia w kolejkach do kas w Biedronce: modelowanie chaosu deterministycznego', doi: '10.PNB/biedronka.2024.162' },
                { title: 'Czy liczba dziur w serze szwajcarskim jest stała Plancka: rewolucja w fizyce nabiału', doi: '10.PNB/ser.2024.163' },
                { title: 'Psychologia tłumu w tramwaju: dlaczego zawsze ktoś stoi na twojej stopie', doi: '10.PNB/tramwaj.2024.164' },
                { title: 'Teoria strun w makaronie: topologia spaghetti bolognese', doi: '10.PNB/makaron.2024.165' },
                { title: 'Efekt motyla w Żabce: jak zakup hot-doga wpływa na klimat globalny', doi: '10.PNB/zabka.2024.166' },
                { title: 'Dlaczego kluczyki zawsze są w ostatnim miejscu gdzie szukasz: prawo Murphy\'ego w praktyce', doi: '10.PNB/klucze.2024.167' },
                { title: 'Kwantowa superpozycja kota Schrödingera który jednocześnie śpi i domaga się jedzenia', doi: '10.PNB/schrodinger.2024.168' },
                { title: 'Analiza DNA barszczu Sosnowskiego: dowody na pozaziemskie pochodzenie', doi: '10.PNB/barszcz.2024.169' },
                { title: 'Wpływ fazy księżyca na jakość kawy z ekspresu w urzędzie: badanie empiryczne', doi: '10.PNB/kawa.2024.170' },
                { title: 'Matematyka kolejek w przychodni: dowód że czas płynie wolniej w poczekalni', doi: '10.PNB/przychodnia.2024.171' },
                { title: 'Termodynamika zupy pomidorowej: dlaczego zawsze jest za gorąca lub za zimna', doi: '10.PNB/zupa.2024.172' },
                { title: 'Genetyka determinuje preferencje: Team Pierogi czy Team Pizza?', doi: '10.PNB/genetyka.2024.173' },
                { title: 'Wpływ memów internetowych na ewolucję świadomości zbiorowej szczurów laboratoryjnych', doi: '10.PNB/memy.2024.174' },
                { title: 'Dlaczego autobusy jeżdżą po trzy naraz: teoria konspiracji czy mechanika kwantowa?', doi: '10.PNB/autobusy.2024.175' },
                { title: 'Archeologia śmietnika: 5000 lat historii wyrzucania śmieci w Warszawie', doi: '10.PNB/smietnik.2024.176' },
                { title: 'Czy rośliny doniczkowe szpiegują właścicieli: paranoja czy prawda?', doi: '10.PNB/doniczki.2024.177' },
                { title: 'Statystyczna analiza prawdopodobieństwa znalezienia wolnego miejsca parkingowego w centrum', doi: '10.PNB/parking.2024.178' },
                { title: 'Neurobiologia prokrastynacji: dlaczego mózg woli YouTube od pracy', doi: '10.PNB/prokrastynacja.2024.179' },
                { title: 'Fizyka kropli deszczu która zawsze trafia dokładnie za kołnierz', doi: '10.PNB/deszcz.2024.180' },
                { title: 'Chemiczne podstawy zapachu nowych książek: narkotyk dla bibliofilów', doi: '10.PNB/ksiazki.2024.181' },
                { title: 'Dlaczego zawsze brakuje jednej skarpetki: czarne dziury w pralce', doi: '10.PNB/skarpetki.2024.182' },
                { title: 'Socjologia windy: dlaczego wszyscy patrzą w sufit', doi: '10.PNB/winda.2024.183' },
                { title: 'Teoria względności w kolejce do kasy: czas płynie wolniej gdy się spieszysz', doi: '10.PNB/kolejka.2024.184' },
                { title: 'Mikrobiologia klawiatury: nowe formy życia odkryte między klawiszami', doi: '10.PNB/klawiatura.2024.185' },
                { title: 'Wpływ horoskopów na decyzje zakupowe chomików: badanie behawioralne', doi: '10.PNB/chomiki.2024.186' },
                { title: 'Dlaczego tosty zawsze spadają masłem w dół: 10000 eksperymentów później', doi: '10.PNB/tosty.2024.187' },
                { title: 'Psychoanaliza lodówki: co mówi o tobie zawartość twojej półki', doi: '10.PNB/lodowka.2024.188' },
                { title: 'Matematyczne dowody że w kolejce obok zawsze jest szybciej', doi: '10.PNB/obok.2024.189' },
                { title: 'Entropia w szufladzie z kablami: dlaczego zawsze się plączą', doi: '10.PNB/kable.2024.190' },
                { title: 'Kwantowe splątanie skarpetek w pralce: gdzie znikają i dokąd idą', doi: '10.PNB/pralka.2024.191' },
                { title: 'Biologia molekularna kurzu: skąd się bierze i dlaczego wraca', doi: '10.PNB/kurz.2024.192' },
                { title: 'Teoria chaosu w ruchu ulicznym: efekt motyla na rondzie', doi: '10.PNB/rondo.2024.193' },
                { title: 'Antropologia kolejki po hot-doga na Orlenie: rytuały i hierarchie', doi: '10.PNB/orlen.2024.194' },
                { title: 'Dlaczego WiFi działa wszędzie oprócz tam gdzie potrzebujesz: fizyka fal i ironii', doi: '10.PNB/wifi.2024.195' },
                { title: 'Paleontologia lodówki: datowanie radiowęglowe resztek w pojemnikach', doi: '10.PNB/resztki.2024.196' },
                { title: 'Mechanika kwantowa długopisu: istnieje i nie istnieje gdy go potrzebujesz', doi: '10.PNB/dlugopis.2024.197' },
                { title: 'Ekologia balkonów blokowych: bioróżnorodność między pelargoniami', doi: '10.PNB/balkony.2024.198' },
                { title: 'Termodynamika herbaty: zawsze za gorąca lub za zimna, nigdy idealna', doi: '10.PNB/herbata.2024.199' },
                { title: 'Genetyczne predyspozycje do zgubienia kluczy: dziedziczenie roztargnienia', doi: '10.PNB/roztargnienie.2024.200' }
            ];
            
            // Use only fake papers
            const shuffledFakes = [...fakePapers].sort(() => Math.random() - 0.5);
            const papersToDisplay = shuffledFakes.slice(0, maxPapers).map(paper => ({ paper, isFromAPI: false }));
            
            // Display all papers with delays
            papersToDisplay.forEach((item, index) => {
                setTimeout(() => {
                    const paperElement = createPaperElement(item.paper, item.isFromAPI);
                    if (paperElement) {
                        papersBackground.appendChild(paperElement);
                        loadedPapers++;
                    }
                }, index * 200);
            });
        }
        
        // Function to make papers escape from mouse
        function animatePapers() {
            const papers = document.querySelectorAll('.paper-item');
            let mouseX = 0;
            let mouseY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            setInterval(() => {
                papers.forEach(paper => {
                    if (!paper.dataset.baseX) return;
                    
                    const baseX = parseFloat(paper.dataset.baseX);
                    const baseY = parseFloat(paper.dataset.baseY);
                    let currentX = parseFloat(paper.dataset.currentX);
                    let currentY = parseFloat(paper.dataset.currentY);
                    
                    // Calculate distance to mouse
                    const dx = currentX + 300 - mouseX; // Center of paper
                    const dy = currentY + 100 - mouseY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    // Escape from mouse if too close
                    if (distance < 300) {
                        const escapeForce = (300 - distance) / 300;
                        const escapeX = (dx / distance) * escapeForce * 100;
                        const escapeY = (dy / distance) * escapeForce * 100;
                        
                        currentX = baseX + escapeX;
                        currentY = baseY + escapeY;
                    } else {
                        // Slowly return to base position
                        currentX += (baseX - currentX) * 0.05;
                        currentY += (baseY - currentY) * 0.05;
                    }
                    
                    paper.dataset.currentX = currentX;
                    paper.dataset.currentY = currentY;
                    paper.style.left = currentX + 'px';
                    paper.style.top = currentY + 'px';
                });
            }, 50);
        }
        
        // Start the game when page loads
        window.addEventListener('DOMContentLoaded', () => {
            const game = new BumblebeeGame();
            
            // Load scientific papers in background
            loadScientificPapers();
            
            // Start paper escape animation after papers load
            setTimeout(animatePapers, 2000);
            
            // Periodically refresh papers every 30-60 seconds
            setInterval(() => {
                const refreshDelay = 30000 + Math.random() * 30000; // 30-60 seconds
                setTimeout(() => {
                    loadScientificPapers(true); // Refresh papers
                }, refreshDelay);
            }, 45000); // Check every 45 seconds on average
        });
    </script>
</body>
</html>
